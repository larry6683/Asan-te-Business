{"ast":null,"code":"import { CookieService } from \"./cookieService\";\nimport { redirectUrls } from \"../web-data/redirectUrls\";\nexport class AppCookieService extends CookieService {\n  constructor() {\n    super();\n  }\n  static saveAppCookie(data) {\n    CookieService.setCookie(this.appCookieName, data);\n  }\n  static getAppCookie() {\n    const appCookieData = CookieService.getCookie(this.appCookieName);\n    if (appCookieData) return JSON.parse(appCookieData);else return null;\n  }\n  static createAppCookie(entityType, entityId, userId, userEmail, accessJwt) {\n    const cookieData = {\n      app: {\n        entityType,\n        entityId\n      },\n      user: {\n        userId,\n        userEmail\n      },\n      auth: {\n        accessJwt\n      }\n    };\n    this.saveAppCookie(cookieData);\n    return this.getAppCookie();\n  }\n  static updateAppCookie(data) {\n    let appCookie = this.getAppCookie();\n    if (!appCookie) {\n      if (data.entityType && data.entityId && data.userId && data.userEmail && data.accessJwt) this.createAppCookie(data.entityType, data.entityId, data.userId, data.userEmail, data.accessJwt);else window.location.href = `${redirectUrls.registration}/`;\n    } else {\n      if (data.entityType) appCookie.app.entityType = data.entityType;\n      if (data.entityId) appCookie.app.entityId = data.entityId;\n      if (data.userId) appCookie.user.userId = data.userId;\n      if (data.userEmail) appCookie.user.userEmail = data.userEmail;\n      if (data.accessJwt) appCookie.auth.accessJwt = data.accessJwt;\n    }\n    this.saveAppCookie(appCookie);\n  }\n  static removeAppCookie() {\n    CookieService.eraseCookie(this.appCookieName);\n  }\n  static getAccessJwtFromAppCookie() {\n    const cookie = this.getAppCookie();\n    if (cookie && cookie.auth) {\n      return cookie.auth.accessJwt;\n    }\n  }\n  static getBasicEntityDataFromAppCookie() {\n    const cookie = this.getAppCookie();\n    if (cookie && cookie.app) {\n      return {\n        entityType: cookie.app.entityType,\n        entityId: cookie.app.entityId\n      };\n    } else return null;\n  }\n}\nAppCookieService.appCookieName = \"asanteApp\";","map":{"version":3,"names":["CookieService","redirectUrls","AppCookieService","constructor","saveAppCookie","data","setCookie","appCookieName","getAppCookie","appCookieData","getCookie","JSON","parse","createAppCookie","entityType","entityId","userId","userEmail","accessJwt","cookieData","app","user","auth","updateAppCookie","appCookie","window","location","href","registration","removeAppCookie","eraseCookie","getAccessJwtFromAppCookie","cookie","getBasicEntityDataFromAppCookie"],"sources":["C:/Users/battu/Downloads/new_version/registration-flow-client/src/cookies/appCookieService.js"],"sourcesContent":["import { CookieService } from \"./cookieService\"\r\nimport { redirectUrls } from \"../web-data/redirectUrls\";\r\n\r\nexport class AppCookieService extends CookieService {\r\n    static appCookieName = \"asanteApp\"\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    static saveAppCookie(data) {\r\n        CookieService.setCookie(this.appCookieName, data);\r\n    }\r\n\r\n    static getAppCookie() {\r\n        const appCookieData = CookieService.getCookie(this.appCookieName);\r\n        if (appCookieData)\r\n            return JSON.parse(appCookieData)\r\n        else return null;\r\n    }\r\n\r\n    static createAppCookie(entityType, entityId, userId, userEmail, accessJwt) {\r\n        const cookieData = {\r\n            app: {\r\n                entityType,\r\n                entityId\r\n            },\r\n            user: {\r\n                userId,\r\n                userEmail\r\n            },\r\n            auth: {\r\n                accessJwt\r\n            }\r\n        }\r\n        this.saveAppCookie(cookieData)\r\n        return this.getAppCookie();\r\n    }\r\n\r\n    static updateAppCookie(data) {\r\n        let appCookie = this.getAppCookie();\r\n        if (!appCookie) {\r\n            if (data.entityType && data.entityId && data.userId && data.userEmail && data.accessJwt)\r\n                this.createAppCookie(\r\n                    data.entityType, data.entityId, data.userId, data.userEmail, data.accessJwt\r\n                )\r\n            else \r\n                window.location.href = `${redirectUrls.registration}/`;\r\n        }\r\n        else {\r\n            if (data.entityType)\r\n                appCookie.app.entityType = data.entityType;\r\n            if (data.entityId)\r\n                appCookie.app.entityId = data.entityId;\r\n            if (data.userId)\r\n                appCookie.user.userId = data.userId;\r\n            if (data.userEmail)\r\n                appCookie.user.userEmail = data.userEmail;\r\n            if (data.accessJwt)\r\n                appCookie.auth.accessJwt = data.accessJwt;\r\n        }\r\n        \r\n        this.saveAppCookie(appCookie)\r\n    }\r\n\r\n    static removeAppCookie() {\r\n        CookieService.eraseCookie(this.appCookieName)\r\n    }\r\n\r\n    static getAccessJwtFromAppCookie() {\r\n        const cookie = this.getAppCookie();\r\n        if (cookie && cookie.auth){\r\n            return cookie.auth.accessJwt;\r\n        }\r\n    }\r\n\r\n    static getBasicEntityDataFromAppCookie() {\r\n        const cookie = this.getAppCookie();\r\n        if (cookie && cookie.app) {\r\n            return {\r\n                entityType: cookie.app.entityType,\r\n                entityId: cookie.app.entityId\r\n            }\r\n        } else return null;\r\n        \r\n    }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}